.include "m16def.inc" ; ??????????? ?????????? ??? ?????? ? ATmega16 
.list ; ????????? ???????? 
.def temp=r16 ; ??????????? ???????? ???????? ???????? 
.def k__z=r17 
.def k___=r18
.def s___=r19 
;-------------------------------------------- 
.cseg ; ????? ???????? ???????????? ???? 
.org 0 ; ????????? ???????? ?????? ?? ???? 
;-------------------------------------------- 
ldi temp,0x80 ; ?????????? ??????????? 
out acsr,temp 
;-------------------------------------------- 
ldi temp,0x00 ; 0 --> temp 
out ddrd,temp ; ????????? ???? rd ?? ???? (00000000 --> ddrd) 
ldi temp,0xFF ; 0xff --> temp 
out ddrb,temp ; ????????? ???? rb ?? ????? (11111111 --> ddrb) 
;--------------------------------------------- 
ldi temp, 0b101 ; ??????????? 1024 
out tccr0, temp 
ldi temp, 135 ; ????????? ???????? ??????? 
out osccal, temp 
 
ldi temp,low(RAMEND) ; ????????????? ????? 
out spl,temp 
ldi temp,high(RAMEND)
out sph,temp 
 
ldi temp, 0 
 
met: 
 
ldi k__z, 10 
 
rcall subr_delay1

ldi k__z, 50 
 
rcall subr_delay0

ldi k__z, 10  

rcall subr_delay1

ldi k__z, 50  

rcall subr_delay0

ldi k__z, 10 

rcall subr_delay1

ldi k__z, 200

rcall subr_delay0

 
 

jmp met 
 
subr_delay1:  ; "1" ?????? k__z ?????? ? ???????????? 
ldi s___, 1  ; 1 --> s___ 
out portb, s___  ; s___ --> pb 
out tcnt0, temp ; 0 --> tcnt0 ????????? ??????? 
ccc1:   ; ?????? ????? 
in k___, tcnt0 ; ??????? ?????? 
cp k___, k__z ; ???????? k__ ? k__z 
brlo ccc1  ; ???? k___<k__z, ???? ? ??????
 ret   ; ????? ???????????? subr_delay1 
 

subr_delay0:  ; "0" ?????? k__z ?????? ? ???????????? 
ldi s___, 0  ; 0 --> s___ 
out portb, s___  ; s___ --> pb 
out tcnt0, temp ; 0 --> tcnt0 
ccc0:   ; ?????? ????? 
in k___, tcnt0 ; ??????? ?????? 
cp k___, k__z ; ???????? k__ ? k__z 
brlo ccc0  ; ???? k___<k__z, ???? ? ?????? 
ret   ; ????? ???????????? subr_delay 
